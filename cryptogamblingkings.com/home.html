<!DOCTYPE html>
<html>
<head>
    <title>Crypto Gambling Kings</title>
    <link rel="icon" type="image/jpeg" href="/king_crown.jpeg"/>
</head>

<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
    }

    #games-container {
        display: flex;
        justify-content: space-around;
        margin-top: 50px;
    }

    .game {
        width: 30%;
        padding: 20px;
        border: 1px solid black;
        border-radius: 10px;
        cursor: pointer;
    }

    .game:hover {
        background-color: lightgray;
    }

</style>

<body>
    <h1>ðŸ‘‘ CRYPTO GAMBLING KINGS ðŸ‘‘</h1>

    <div id="credit-button" style="display: none">
        <button onclick="goToCredits()">CREDITS</button>
    </div>

    
    <div id="auth">
        <button id="signIn-button" onclick="window.location.href='/signIn'">SIGN IN</button>
        <div id="user-info" style="display: none;">
            <p id="username"></p>
            <p id="credits"></h2>
        </div>
    </div>

    <div id="games-container">
        <div class="game" onclick="goToGame('slotMachine')">
            <h2>Slots</h2>
        </div>
        <div class="game" onclick="goToGame('blackjack')">
            <h2>Blackjack</h2>
        </div>
        <div class="game" onclick="goToGame('roulette')">
            <h2>Roulette</h2>
        </div>
    </div>

</body>
</html>

<script>

    var username = 'null';

    document.addEventListener('DOMContentLoaded', function() {
        // Your code here...

        fetch('/api/user')
            .then(response => response.json())
            .then(data => {
                if (data.email) {
                    document.getElementById('signIn-button').style.display = 'none';
                    document.getElementById('credit-button').style.display = 'block';
                    document.getElementById('user-info').style.display = 'block';

                    username = data.email.substring(0, data.email.indexOf("@"));
                    
                    document.getElementById('username').innerHTML = data.email;
                    document.getElementById('credits').innerHTML = data.credits;
                }
            })
            .catch(error => console.error('Error:', error));
    });

    // var slotMachine_button = document.getElementById("slotMachine");
    // slotMachine_button.onclick = window.location.replace(`/slotMachine/user/${username}`)

    function goToGame(game) {
        window.location.href = `/${username}/${game}`
    }


    function goToCredits() {
        window.location.href=`${username}/credit-management`
    }

</script>